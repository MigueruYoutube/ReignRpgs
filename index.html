<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reign Of Rpg's - Novels</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #9c27b0;
            --primary-dark: #7b1fa2;
            --secondary: #ffd700;
            --dark: #121212;
            --darker: #0a0a0a;
            --light: #ffffff;
            --gray: #b0b0b0;
            --red: #f44336;
            --card-bg: rgba(30, 30, 30, 0.8);
            --card-hover: rgba(50, 50, 50, 0.8);
            --transition: all 0.3s ease;
            --border-radius: 8px;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--dark);
            color: var(--light);
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 50px;
        }

        /* Welcome Notification */
        .welcome-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: white;
            padding: 8px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            z-index: 2000;
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.5s ease, top 0.5s ease;
            font-size: 0.6rem;
            pointer-events: none; /* Permite clicar através da notificação */
        }

        .welcome-notification.show {
            opacity: 1;
            top: 20px;
        }

        .welcome-notification i {
            font-size: 0.6rem;
        }

        /* Header */
        header {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 5%;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(156, 39, 176, 0.3);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--light);
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo span {
            color: var(--secondary);
            margin: 0px -9px 0px;
        }

        .logo i {
            color: var(--primary);
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .search-container {
            position: relative;
            width: 100px;
             margin-left: 100px;
        }

        #searchInput {
            width: 100%;
            padding: 12px 15px 12px 45px;
            border-radius: 50px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background: rgba(0, 0, 0, 0.3);
            color: var(--light);
            font-size: 1rem;
            transition: var(--transition);
        }

        #searchInput:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(0, 0, 0, 0.4);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        /* Navigation */
        .main-nav {
            background: rgba(0, 0, 0, 0.3);
            padding: 0 5%;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }

        .main-nav::-webkit-scrollbar {
            height: 5px;
        }

        .main-nav::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        .nav-links {
            display: inline-flex;
            list-style: none;
            padding: 15px 0;
            gap: 15px;
        }

        .nav-link {
            color: var(--gray);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 30px;
            transition: var(--transition);
        }

        .nav-link:hover, .nav-link.active {
            background: var(--primary);
            color: white;
        }

        /* Main Content */
        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 5%;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--secondary);
        }

        .section-link {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .section-link:hover {
            text-decoration: underline;
        }

        /* Carousel */
        .carousel {
            position: relative;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 40px;
            height: 400px;
            box-shadow: var(--shadow);
        }

        .slides-container {
            display: flex;
            height: 100%;
            transition: transform 0.5s ease;
            scroll-behavior: smooth;
        }

        .slide {
            min-width: 100%;
            height: 100%;
            position: relative;
            flex-shrink: 0;
            cursor: pointer;
        }

        .slide-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }

        .slide-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
        }

        .slide-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            padding-top: 60px;
            z-index: 2;
        }

        .slide-badges {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .slide-badge {
            padding: 5px 15px;
            border-radius: 30px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .badge-new {
            background: var(--primary);
            color: white;
        }

        .badge-popular {
            background: var(--secondary);
            color: var(--darker);
        }

        .badge-completed {
            background: var(--red);
            color: white;
        }

        .slide-title {
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: white;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        .slide-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            font-size: 0.6rem;
            color: var(--gray);
        }

        .slide-meta .date {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .slide-meta .date i {
            font-size: 0.5rem;
        }

        .slide-description {
            color: white;
            margin-bottom: 15px;
            max-width: 600px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
            font-size: 0.9rem;
        }

        .carousel-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 3;
        }

        .control-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-btn.active {
            background: var(--secondary);
            transform: scale(1.2);
        }

        /* Novels Grid */
        .novels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .novel-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            cursor: pointer;
        }

        .novel-card:hover {
            transform: translateY(-10px);
            background: var(--card-hover);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }

        .card-img-container {
            position: relative;
            height: 280px;
            overflow: hidden;
        }

        .card-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .novel-card:hover .card-img {
            transform: scale(1.05);
        }

        .card-badges {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .card-badge {
            padding: 4px 10px;
            border-radius: 30px;
            font-size: 0.75rem;
            font-weight: 500;
            text-align: center;
        }

        .card-content {
            padding: 15px;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: white;
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.6rem;
            color: var(--gray);
            margin-bottom: 8px;
        }

        .card-meta .date {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .card-meta .date i {
            font-size: 0.5rem;
        }

        .card-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }

        .card-category {
            font-size: 0.7rem;
            padding: 3px 8px;
            background: rgba(156, 39, 176, 0.2);
            color: var(--primary);
            border-radius: 30px;
        }

        .card-info {
            color: var(--gray);
            font-size: 0.85rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 10px;
            min-height: 40px;
        }

        /* Footer */
        footer {
            background: rgba(10, 10, 10, 0.95);
            padding: 40px 5% 20px;
            margin-top: 50px;
            border-top: 1px solid rgba(156, 39, 176, 0.3);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: white;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--primary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: var(--gray);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: var(--secondary);
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: var(--transition);
        }

        .social-link:hover {
            background: var(--primary);
            transform: translateY(-5px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 50px 0;
            font-size: 1.2rem;
            color: var(--gray);
        }

        .loading-spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(156, 39, 176, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Error Message */
        .error-message {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid var(--red);
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
            margin: 50px 0;
        }

        .error-message i {
            font-size: 3rem;
            color: var(--red);
            margin-bottom: 20px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--border-radius);
        }

        .empty-state i {
            font-size: 4rem;
            color: var(--gray);
            margin-bottom: 20px;
        }

        /* Responsividade */
        @media (max-width: 1100px) {
            .novels-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .search-container {
                width: 100px;
            }
            
            .carousel {
                height: 350px;
            }
            
            .slide-title {
                font-size: 1.3rem;
            }
            
            .slide-content {
                padding: 15px;
                padding-top: 50px;
            }
            
            .novels-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 1.3rem;
            }
            
            .search-container {
                width: 60%;
                margin-top: 15px;
                order: 3;
            }
            
            .header-actions {
                flex-wrap: wrap;
            }
            
            .carousel {
                height: 300px;
            }
            
            .slide-title {
                font-size: 1.2rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .novels-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .card-img-container {
                height: 200px;
            }
        }

        /* Touch controls for carousel */
        .slides-container {
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
        }

        .slides-container::-webkit-scrollbar {
            display: none;
        }

        .slide {
            scroll-snap-align: start;
        }

        :root {
            --orange: #ffd700;
        }

        .filters {
            display: inline-block;
        }

        #filterSelect {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;

            background: transparent;
            border: none;
            color: var(--orange);
            font-weight: 500;
            font-size: 1rem;
            cursor: pointer;
            padding: 0;
            margin: 0;
            outline: none;
            text-decoration: none;
        }

        /* Remove a seta nativa no Chrome */
        #filterSelect::-ms-expand {
            display: none;
        }

        /* Efeito ao passar o mouse */
        #filterSelect:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Welcome Notification -->
    <div class="welcome-notification" id="welcomeNotification">
        <i class="fas fa-book-open"></i>
        <span>Bem vindo ao Reign of Rpg's!</span>
    </div>
    
    <!-- Header -->
    <header>
        <a href="#" class="logo">
            <i class="fas fa-book"></i>ReignOf<span>Rpg</span>
        </a>
        
        <div class="header-actions">
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="searchInput" placeholder="Pesquisar novels...">
            </div>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav class="main-nav" id="categoriesNav">
        <ul class="nav-links">
            <li><a href="#" class="nav-link active" data-category="all">Todos</a></li>
            <!-- Categorias serão preenchidas pelo JavaScript -->
        </ul>
    </nav>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Carrossel de Populares -->
        <section>
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-fire"></i>
                    Populares
                </h2>
                <a href="./PopularNovels.html" class="section-link">
                    Ver todos <i class="fas fa-chevron-right"></i>
                </a>
            </div>
            
            <div class="carousel">
                <div class="slides-container" id="slidesContainer">
                    <!-- Slides serão preenchidos pelo JavaScript -->
                </div>
                
                <div class="carousel-controls" id="carouselControls">
                    <!-- Controles serão preenchidos pelo JavaScript -->
                </div>
            </div>
        </section>
        
        <!-- Todos os Novels -->
        <section>
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-book-open"></i>
                    Todos os Novels
                </h2>
                <div class="filters">
                    <select id="filterSelect">
                        <option value="all">Todos</option>
                        <option value="new">Novos</option>
                        <option value="popular">Populares</option>
                        <option value="completed">Completos</option>
                    </select>
                </div>
            </div>
            
            <div id="loadingIndicator" class="loading">
                <div class="loading-spinner"></div>
                <p>Carregando novels...</p>
            </div>
            
            <div class="novels-grid" id="novelsContainer">
                <!-- Cards serão preenchidos pelo JavaScript -->
            </div>
        </section>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Sobre Nós</h3>
                <p>Reign Of Rpg's é um universo completo dedicado à criação de bots para Discord, mundos de RPG e histórias envolventes de ficção. Atualizamos regularmente com novas experiências e conteúdos.</p>
                  <div class="social-links">
                    <a href="https://discord.gg/P8CnCTqNV3" class="social-link"><i class="fab fa-discord"></i></a>
                    <a href="https://github.com/MigueruYoutube" class="social-link"><i class="fab fa-github"></i></a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Links Rápidos</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Página Inicial</a></li>
                    <li><a href="./PopularNovels.html"><i class="fas fa-chevron-right"></i> Novels Populares</a></li>
                    <li><a href="./NewNovels.html"><i class="fas fa-chevron-right"></i> Lançados Recentemente</a></li>
                    <li><a href="https://discord.com/channels/790817989200314380/1388900523637211228"><i class="fas fa-chevron-right"></i> Sugerir Novel</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Ajuda</h3>
                <ul class="footer-links">
                    <li><a href="./redirects/comoler.html"><i class="fas fa-chevron-right"></i> Como ler</a></li>
                    <li><a href="https://discord.com/channels/790817989200314380/1378164709940924446"><i class="fas fa-chevron-right"></i> Reportar erro</a></li>
                    <li><a href="./redirects/termos.html"><i class="fas fa-chevron-right"></i> Termos de Uso</a></li>
                    <li><a href="./redirects/privacidade.html"><i class="fas fa-chevron-right"></i> Privacidade</a></li>
                </ul>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2025 Reign Of Rpg's. Todos os direitos reservados.
        </div>
    </footer>

    <script>
        // Elementos DOM
        const slidesContainer = document.getElementById('slidesContainer');
        const carouselControls = document.getElementById('carouselControls');
        const novelsContainer = document.getElementById('novelsContainer');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const searchInput = document.getElementById('searchInput');
        const filterSelect = document.getElementById('filterSelect');
        const categoriesNav = document.getElementById('categoriesNav');
        const navLinks = document.querySelectorAll('.nav-link');
        const welcomeNotification = document.getElementById('welcomeNotification');
        
        // Variáveis do carrossel
        let currentSlide = 0;
        let autoSlideInterval;
        let allNovels = [];
        let allCategories = new Set();
        let startX, moveX;
        let isDragging = false;

        // Função para converter data no formato bonito com ícone
function converterData(dataStr) {
    const meses = [
        'jan', 'fev', 'mar', 'abr', 'mai', 'jun',
        'jul', 'ago', 'set', 'out', 'nov', 'dez'
    ];

    // Divide a data e ignora a hora
    const [dataParte] = dataStr.split(',');
    const [dia, mes, ano] = dataParte.split('/');

    return `<i class="fas fa-calendar-alt"></i> ${dia} ${meses[parseInt(mes) - 1]}, ${ano}`;
}

        // Função para contar capítulos de um novel
        async function contarCapitulos(novelId) {
            let count = 0;
            let id = 1;
            
            while (true) {
                try {
                    const response = await fetch(`./Novels/${novelId}/Capitulos/cap${id}.json`);
                    if (!response.ok) {
                        break;
                    }
                    count++;
                    id++;
                } catch (error) {
                    break;
                }
            }
            
            return count;
        }

        // Função para mostrar notificação de boas-vindas
        function showWelcomeNotification() {
    // Mostrar a notificação
    setTimeout(() => {
        welcomeNotification.classList.add('show');
    }, 1000);
    
    // Esconder e remover após 3 segundos
    setTimeout(() => {
        if (welcomeNotification) {
            welcomeNotification.remove();
        }
    }, 4000);
    
    // Verificar se é mobile para vibrar
    if ('vibrate' in navigator && window.innerWidth <= 768) {
        navigator.vibrate([200, 100, 200]);
    } else {
        // Tocar som de notificação no desktop
        const notificationSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3');
        notificationSound.volume = 0.3;
        notificationSound.play().catch(e => console.log('Não foi possível tocar o som:', e));
    }
}

        // Função para buscar os novels
        async function fetchNovels() {
            try {
                const response = await fetch('./Novels/AllNovels.json');
                
                if (!response.ok) {
                    throw new Error('Arquivo não encontrado');
                }
                
                const data = await response.json();
                
                if (!data || data.length === 0) {
                    throw new Error('Nenhum novel disponível');
                }
                
                // Contar capítulos para cada novel
                for (let novel of data) {
                    const chaptersCount = await contarCapitulos(novel.id);
                    novel.chapters = chaptersCount;
                }
                
                return data;
            } catch (error) {
                console.error('Erro ao carregar novels:', error);
                throw error;
            }
        }

        // Função para extrair categorias
        function extractCategories(novels) {
            const categories = new Set(['all']); // 'all' é a categoria padrão
            
            novels.forEach(novel => {
                if (novel.category && Array.isArray(novel.category)) {
                    novel.category.forEach(cat => {
                        if (cat && typeof cat === 'string') {
                            categories.add(cat.toLowerCase());
                        }
                    });
                }
            });
            
            return Array.from(categories);
        }

        // Função para renderizar as categorias
        function renderCategories(categories) {
            const navLinksContainer = categoriesNav.querySelector('.nav-links');
            
            // Limpar links existentes (exceto o primeiro que é "Todos")
            while (navLinksContainer.children.length > 1) {
                navLinksContainer.removeChild(navLinksContainer.lastChild);
            }
            
            // Adicionar categorias
            categories.filter(cat => cat !== 'all').forEach(category => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="#" class="nav-link" data-category="${category}">${capitalizeFirstLetter(category)}</a>`;
                navLinksContainer.appendChild(li);
            });
            
            // Adicionar event listeners
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Atualizar link ativo
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filtrar novels
                    const category = this.dataset.category;
                    filterNovels(searchInput.value, filterSelect.value, category);
                });
            });
        }

        // Função para capitalizar a primeira letra
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        // Função para converter data no formato "dd/mm/yyyy, HH:mm" para timestamp
        function parseBrazilianDate(dateStr) {
            const [datePart, timePart] = dateStr.split(', ');
            const [day, month, year] = datePart.split('/').map(Number);
            const [hours, minutes] = timePart.split(':').map(Number);
            
            // Criar data no fuso horário de São Paulo (GMT-3)
            // Nota: O JavaScript usa o fuso horário do cliente, então precisamos ajustar
            const date = new Date(year, month - 1, day, hours, minutes);
            
            // Ajustar para o fuso horário de São Paulo (GMT-3)
            // Como o JavaScript já usa o fuso horário local, precisamos compensar
            // Vamos assumir que o date no JSON está em GMT-3 (horário de SP)
            const timezoneOffset = date.getTimezoneOffset(); // em minutos
            const spOffset = 180; // GMT-3 = 180 minutos
            const adjustedDate = new Date(date.getTime() + (timezoneOffset + spOffset) * 60000);
            
            return adjustedDate.getTime();
        }

        // Função para verificar se um novel é novo (lançado nos últimos 30 dias)
        function isNovelNew(novel) {
            if (!novel.date) return false;
            
            try {
                const releaseDate = parseBrazilianDate(novel.date);
                const now = new Date().getTime();
                const thirtyDaysInMs = 30 * 24 * 60 * 60 * 1000;
                
                return (now - releaseDate) <= thirtyDaysInMs;
            } catch (e) {
                console.error('Erro ao verificar data do novel:', e);
                return false;
            }
        }

        // Função para renderizar o carrossel
        function renderCarousel(novels) {
            // Filtrar apenas novels populares (IsPopular = true)
            const popularNovels = novels.filter(novel => novel.IsPopular).slice(0, 5);
            
            // Limpar containers
            slidesContainer.innerHTML = '';
            carouselControls.innerHTML = '';
            
            if (popularNovels.length === 0) {
                slidesContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-book-open"></i>
                        <h3>Nenhum destaque disponível</h3>
                        <p>Volte mais tarde para novos lançamentos</p>
                    </div>
                `;
                return;
            }
            
            // Renderizar slides
            popularNovels.forEach((novel, index) => {
                // Criar elemento de slide
                const slide = document.createElement('div');
                slide.className = 'slide';
                
                // Gerar badges - agora verificando a data
                const badges = [];
                if (isNovelNew(novel)) badges.push({text: 'Novo', cls: 'badge-new'});
                if (novel.IsPopular) badges.push({text: 'Popular', cls: 'badge-popular'});
                if (novel.IsCompleted) badges.push({text: 'Completo', cls: 'badge-completed'});
                
                const badgesHtml = badges.map(badge => 
                    `<span class="slide-badge ${badge.cls}">${badge.text}</span>`
                ).join('');
                
                // Conteúdo do slide
                slide.innerHTML = `
                    <img src="${novel.cover}" alt="${novel.name}" class="slide-image">
                    <div class="slide-overlay"></div>
                    <div class="slide-content">
                        <div class="slide-badges">
                            ${badgesHtml}
                        </div>
                        <h2 class="slide-title">${novel.name}</h2>
                       <div class="slide-meta">
    <span>${converterData(novel.date) || 'Data não disponível'}</span>
    <span>${novel.chapters || 0} capítulos</span>
</div>
                `;
                
                // Adicionar evento de clique para redirecionar
                slide.addEventListener('click', () => {
                    window.location.href = `./Novels/${novel.id}/index.html`;
                });
                
                slidesContainer.appendChild(slide);
                
                // Criar controle
                const control = document.createElement('button');
                control.className = 'control-btn';
                control.dataset.index = index;
                if (index === 0) control.classList.add('active');
                
                control.addEventListener('click', () => {
                    goToSlide(index);
                });
                
                carouselControls.appendChild(control);
            });
            
            // Configurar eventos de toque para o carrossel
            setupCarouselTouchEvents();
        }

        // Função para configurar eventos de toque
        function setupCarouselTouchEvents() {
            slidesContainer.addEventListener('touchstart', handleTouchStart, false);
            slidesContainer.addEventListener('touchmove', handleTouchMove, false);
            slidesContainer.addEventListener('touchend', handleTouchEnd, false);
        }

        function handleTouchStart(e) {
            startX = e.touches[0].clientX;
            isDragging = true;
            clearInterval(autoSlideInterval);
        }

        function handleTouchMove(e) {
            if (!isDragging) return;
            moveX = e.touches[0].clientX;
        }

        function handleTouchEnd() {
            if (!isDragging) return;
            isDragging = false;
            
            if (moveX < startX - 50) {
                nextSlide(); // Deslizou para a esquerda
            } else if (moveX > startX + 50) {
                prevSlide(); // Deslizou para a direita
            }
            
            startAutoSlide();
        }

        // Função para renderizar os cards de novel
        function renderNovelCards(novels, filter = '', statusFilter = 'all', categoryFilter = 'all') {
            // Limpar container
            novelsContainer.innerHTML = '';
            
            // Aplicar filtros
            let filteredNovels = [...novels];
            
            // Filtro de texto
            if (filter) {
                const searchTerm = filter.toLowerCase();
                filteredNovels = filteredNovels.filter(novel => 
                    novel.name.toLowerCase().includes(searchTerm) || 
                    novel.sinopse.toLowerCase().includes(searchTerm)
                );
            }
            
            // Filtro de status - agora verificando a data para "new"
            if (statusFilter === 'new') {
                filteredNovels = filteredNovels.filter(novel => isNovelNew(novel));
            } else if (statusFilter === 'popular') {
                filteredNovels = filteredNovels.filter(novel => novel.IsPopular);
            } else if (statusFilter === 'completed') {
                filteredNovels = filteredNovels.filter(novel => novel.IsCompleted);
            }
            
            // Filtro de categoria
            if (categoryFilter !== 'all') {
                filteredNovels = filteredNovels.filter(novel => 
                    novel.category && novel.category.includes(categoryFilter)
                );
            }
            
            // Verificar se há resultados
            if (filteredNovels.length === 0) {
                novelsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>Nenhum novel encontrado</h3>
                        <p>Tente ajustar sua pesquisa ou filtros</p>
                    </div>
                `;
                return;
            }
            
            // Renderizar cards
            filteredNovels.forEach(novel => {
                const card = document.createElement('div');
                card.className = 'novel-card';
                
                // Gerar badges - agora verificando a data
                let badgesHtml = '';
                if (isNovelNew(novel)) {
                    badgesHtml += '<span class="card-badge badge-new">Novo</span>';
                }
                if (novel.IsPopular) {
                    badgesHtml += '<span class="card-badge badge-popular">Popular</span>';
                }
                if (novel.IsCompleted) {
                    badgesHtml += '<span class="card-badge badge-completed">Completo</span>';
                }
                
                // Gerar categorias
                let categoriesHtml = '';
                if (novel.category && novel.category.length > 0) {
                    categoriesHtml = novel.category.slice(0, 3).map(cat => 
                        `<span class="card-category">${capitalizeFirstLetter(cat)}</span>`
                    ).join('');
                }
                
                card.innerHTML = `
                    <div class="card-img-container">
                        <img src="${novel.cover}" alt="${novel.name}" class="card-img">
                        <div class="card-badges">
                            ${badgesHtml}
                        </div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${novel.name}</h3>
<div class="card-meta">
    <span>${converterData(novel.date) || 'N/D'}</span>
    <span>${novel.chapters || 0} caps</span>
</div>
                        <div class="card-categories">
                            ${categoriesHtml}
                        </div>
                        <p class="card-info">${novel.sinopse}</p>
                    </div>
                `;
                
                // Adicionar evento de clique para redirecionar
                card.addEventListener('click', () => {
                    window.location.href = `./Novels/${novel.id}/index.html`;
                });
                
                novelsContainer.appendChild(card);
            });
        }

        // Função para filtrar novels
        function filterNovels(searchTerm = '', statusFilter = 'all', categoryFilter = 'all') {
            renderNovelCards(allNovels, searchTerm, statusFilter, categoryFilter);
        }

        // Funções do carrossel
        function goToSlide(index) {
            const slides = document.querySelectorAll('.slide');
            const controls = document.querySelectorAll('.control-btn');
            
            if (index >= slides.length) index = 0;
            if (index < 0) index = slides.length - 1;
            
            slidesContainer.scrollTo({
                left: index * slidesContainer.offsetWidth,
                behavior: 'smooth'
            });
            
            currentSlide = index;
            
            // Atualizar controles ativos
            controls.forEach((control, i) => {
                if (i === index) {
                    control.classList.add('active');
                } else {
                    control.classList.remove('active');
                }
            });
            
            // Reiniciar o slide automático
            restartAutoSlide();
        }
        
        function nextSlide() {
            goToSlide(currentSlide + 1);
        }
        
        function prevSlide() {
            goToSlide(currentSlide - 1);
        }
        
        function startAutoSlide() {
            autoSlideInterval = setInterval(nextSlide, 15000);
        }
        
        function restartAutoSlide() {
            clearInterval(autoSlideInterval);
            startAutoSlide();
        }

        // Event Listeners
        searchInput.addEventListener('input', (e) => {
            const activeCategory = document.querySelector('.nav-link.active').dataset.category;
            filterNovels(e.target.value, filterSelect.value, activeCategory);
        });

        filterSelect.addEventListener('change', (e) => {
            const activeCategory = document.querySelector('.nav-link.active').dataset.category;
            filterNovels(searchInput.value, e.target.value, activeCategory);
        });

        // Carregar dados quando a página carregar
        window.addEventListener('DOMContentLoaded', async () => {
            try {
                // Mostrar notificação de boas-vindas
                showWelcomeNotification();
                
                // Buscar dados
                allNovels = await fetchNovels();
                
                // Extrair categorias
                allCategories = extractCategories(allNovels);
                
                // Renderizar categorias
                renderCategories(allCategories);
                
                // Esconder indicador de carregamento
                loadingIndicator.style.display = 'none';
                
                // Renderizar conteúdo
                renderCarousel(allNovels);
                filterNovels();
                
                // Iniciar carrossel automático
                startAutoSlide();
            } catch (error) {
                console.error('Erro ao carregar novels:', error);
                
                // Esconder indicador de carregamento
                loadingIndicator.style.display = 'none';
                
                // Mostrar mensagem de erro
                novelsContainer.innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Erro ao carregar novels</h3>
                        <p>${error.message || 'Tente recarregar a página mais tarde'}</p>
                        <p>Arquivo procurado: ./Novels/AllNovels.json</p>
                    </div>
                `;
                
                // Limpar carrossel
                slidesContainer.innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Não foi possível carregar os destaques</h3>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>